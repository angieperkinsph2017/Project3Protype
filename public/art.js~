const port='9019'
const Url = 'http://jimskon.com'+port
var operation;
var selectID;
var recIndex;
var rows;
var webPage="Login";
var sqlTable ="";
var saveRecord;

$(document).ready(function () {
  /*$(".btn-login").click( {
    sqlTable="userinfo.sql"
  });*/
    console.log("ready");
    operation = "Artist";//default
    $("#user-search").click(getList);
  //issue w get matches

    //console.log("ready");
    //changeoperation(operation);
  /*$(".btn-login").click(getMatches("Userinfo"));

  $(".btn-createaccount").click(makeAccount);
*/


  $(".dropdown-menu li a").click(function(){
    $(this).parents(".btn-group").find('.selection').text($(this).text());
    operation=$(this).text().split(" ").pop();  // Get last word
  });
  $('#results').append(operation);
  $("#art-search").click(getMatches("art"));

});

function getMatches(sqlTable) {
  console.log("GetMatches: "+sqlTable);
  /*if(sqlTable=="Userinfo") {
    if("#username-login").length()>1{
      var username = $("#username-login").val();
      var password = $("#password-login").val();
      var search = username+" "+password; }
    else
      var search = $("#user-search-input").val();
  }
  else */
  if(sqlTable=="art") {
    console.log("searching art");
    var search = $("#art-search-input").val();
  }
  $.ajax({
    url: Url+'/find?field='+operation+'&search='+search+'&sqlTable='+sqlTable, //is this how the find function works or should it be
    //should be operation/thing from dropdown menu + searchInput
    type:"GET",
    success: processResults,
    error:displayError
  })
    function displayError(error) {
	console.log("Ajax error:"+ error);
    }
}
function pageChange(webPage) {
/*  if(webPage=="Login") {
    //login page functions will show
}*/
  if(webPage=="Main") {
    //main page functions wiill show
  }
  if(webPage=="ArtSeach") {
    //Art Results pages will show
  }
}
function errorText() {
  $("#modal-login-text").hide();
  $("#modal-login-error-text").show();
}
 function getList(){
   //$("#results").hide();
   //$('#results').append("this is working");

   $.ajax({
     url: Url+'/list', //is this how the find function works or should it be
     //should be operation/thing from dropdown menu + searchInput
     type:"GET",
     success: processResults,
     error:displayError
   })
   $('#results').append("this is working");

 }



 //an issue
function processResults(results) {
  $('#results').append("this is working");
  if(results=="") {
   errorText();
  }
  else {
    ('#modal').modal('hide');
    console.log("process results")
  }

}
